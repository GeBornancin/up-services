<app-header></app-header>
<main class="w-full h-full items-center justify-center flex flex-col">
    <p class="w-full lg:w-1/2 text-[30px] md:text-[50px] font-bold mt-10 text-center leading-none text-gray-800">
        Bem-vindo ao painel administrativo.</p>

    <!-- Profissionais pendentes de aprovação section -->
    <section class="w-full h-full  flex flex-col items-center gap-6">
        <div class="flex mt-5 items-center gap-4">
            <img class="h-6 w-6" src="icons/black-clock-icon.svg" alt="">
            <h1 class="text-[16px] md:text-[30px]  text-gray-600 font-semibold text-bg-primary ">Profissionais pendentes
                de
                aprovação</h1>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 [&_img]:h-25 [&_img]:w-25">
            @if(providersToApprove.length == 0) {
            <h1 class="text-[20px] text-gray-500 col-span-full text-center">Nenhum profissional pendente de aprovação.
            </h1>
            }@else{
            @for(provider of providersToApprove; track provider.id) {
            <div
                class="w-80 lg:w-60 xl:w-80 h-70 flex-1 bg-primary rounded-2xl text-white p-5 justify-center items-center">
                <h1 class="text-[25px] text-center font-bold ">{{provider.firstName}} {{provider.lastName}}</h1>
                <h1 class="mt-5 text-[20px] text-center text-gray-300">{{provider.specialties}}</h1>
                <h1 class="text-[20px] text-center text-gray-300">{{provider.email}}</h1>
                <h1 class="text-[20px] text-center text-gray-300">{{provider.phone}}</h1>
                <div class="w-full gap-2 mt-5 flex">
                    <button (click)="rejectProvider(provider.id)"
                        class="py-3 w-1/2 bg-red-800 rounded-2xl font-bold hover:bg-red-400 hover:cursor-pointer">Rejeitar</button>
                    <button (click)="approveProvider(provider.id)"
                        class="py-3 w-1/2 bg-button-green rounded-2xl font-bold hover:cursor-pointer">Aceitar</button>
                </div>
            </div>
            }
            }
        </div>
        <span class="w-[95%] h-0.5 bg-gray-300 mt-3"></span>
    </section>

    <!-- Serviço section -->
    <section class="pt-10 w-full flex flex-col items-center">
        <div class="flex mt-5 items-center gap-4">
            <img class="h-10 w-10" src="icons/nurse-service-black-icon.png" alt="">
            <h1 class="text-[16px] md:text-[30px]  text-gray-600 font-semibold text-bg-primary ">Serviços</h1>
            <app-button-green [text]="'Adicionar Serviço'" (click)="createServiceModalOpen = true"></app-button-green>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 [&_img]:h-25 [&_img]:w-25">
        </div>
        <span class="w-[95%] h-0.5 bg-gray-300 mt-3"></span>
    </section>

    <!-- Transações section -->
    <section class="pt-10 w-full flex flex-col items-center">
        <div class="flex mt-5 items-center gap-4 mb-10">
            <img class="h-10 w-10" src="icons/transaction-black-icon.png" alt="">
            <h1 class="text-[16px] md:text-[30px]  text-gray-600 font-semibold text-bg-primary">Transações</h1>
        </div>
        <div class=" bg-gray-300 rounded-2xl w-[90%] lg:w-[30%] h-26 font-bold flex justify-center items-center gap-5 ">
            <div class="flex flex-col items-center">
                <a (click)="setActiveTab('pending')"
                    [class]="'cursor-pointer flex items-center justify-center rounded-2xl m-0.5 w-full h-10 px-4 ' + (activeTab === 'pending' ? 'bg-white' : 'hover:bg-gray-200')">Pendentes</a>
                <a (click)="setActiveTab('approved')"
                    [class]="'cursor-pointer flex items-center justify-center rounded-2xl m-0.5 w-full  h-10 px-4 ' + (activeTab === 'approved' ? 'bg-white' : 'hover:bg-gray-200')">Aprovados</a>
            </div>
            <div class="flex flex-col items-center">
                <a (click)="setActiveTab('rejected')"
                    [class]="'cursor-pointer flex items-center justify-center rounded-2xl m-0.5 w-full h-10 px-4 ' + (activeTab === 'rejected' ? 'bg-white' : 'hover:bg-gray-200')">Rejeitados</a>
                <a (click)="setActiveTab('refunded')"
                    [class]="'cursor-pointer flex items-center justify-center rounded-2xl m-0.5 w-full h-10 px-4 ' + (activeTab === 'refunded' ? 'bg-white' : 'hover:bg-gray-200')">Reembolsados
                </a>
            </div>
        </div>
        <div class="mt-6 w-full px-4 lg:px-10">
            <div class="scroll-container overflow-x-auto">
                <div class="flex gap-6 pb-4">
                    @if(activeTab === 'pending') {
                    @for(transaction of pendingTransactions; track transaction.id) {
                    <div (click)="openTransactionModal(transaction.id, transaction.status)"
                        class="scroll-item group bg-gray-800 text-white rounded-lg p-4 shadow shrink-0 w-70 h-70 flex flex-col justify-center items-center gap-6 hover:bg-gray-700 hover:cursor-pointer relative overflow-hidden">
                        <span
                            class="absolute inset-0 flex items-center justify-center bg-black/45 text-lg font-bold opacity-0 transition-opacity duration-200 pointer-events-none group-hover:opacity-100">Ver
                            mais detalhes</span>
                        <h2 class="text-[24px] font-bold">Transação Pendente</h2>
                        <div class="flex gap-6">
                            <div class="flex flex-col justify-center items-center">
                                <p class="font-black">Valor Bruto</p>
                                <p class="font-bold text-[24px]">R$</p>
                                <p class="text-[22px] font-medium">{{transaction.valor | number:'1.2-2'}}</p>
                            </div>
                            <div class="flex flex-col justify-center items-center">
                                <p class="font-black">Valor Líquido</p>
                                <p class="font-bold text-[24px]">R$</p>
                                <p class="text-[22px] font-medium">{{transaction.valorLiquido | number:'1.2-2'}}</p>
                            </div>
                        </div>
                        <div class="flex flex-col justify-center items-center gap-2">
                            <img class="w-8 h-8" src="icons/white-clock-icon.svg" alt="">
                            <p class="text-[22px] font-medium">{{transaction.criadoEm | date:'short'}}</p>
                        </div>
                    </div>
                    } @empty {
                    <p class="text-gray-500 text-center w-full py-10">Nenhum serviço ativo</p>
                    }
                    }
                </div>
            </div>
        </div>
    </section>
</main>
@if(transactionModalOpen) {
<app-transaction-modal [transactionDetails]="transactionDetails"
    (closeModal)="transactionModalOpen = false"></app-transaction-modal>
}
@if(createServiceModalOpen) {
<app-create-service-modal (closeModal)="createServiceModalOpen = false"></app-create-service-modal>
}