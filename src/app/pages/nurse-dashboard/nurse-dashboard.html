<app-header></app-header>
@if(isLoadingPage) {
<div class="w-full h-screen flex justify-center items-center">
    <img src="icons/black-loading-icon.svg" alt="Loading" class="h-20 w-20 animate-spin" />
</div>
} @if(!isLoadingPage) {
<main class="w-full h-full flex flex-col items-center">
    <section class="pt-10 flex flex-col items-center">
        <h1 class="text-[24px] text-center mb-10 font-bold">Seu painel</h1>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 [&_img]:h-25 [&_img]:w-25">
            <div
                class="w-80 lg:w-60 xl:w-80 h-40 flex-1 bg-primary rounded-2xl text-white p-5 justify-center items-center">
                <h1>Novas solicitações</h1>
                <div class="flex justify-between">
                    <h1 class="text-[75px]">{{ availableServices.length }}</h1>
                    <img src="icons/white-calendary-icon.svg" alt="" />
                </div>
            </div>
            <div
                class="w-80 lg:w-60 xl:w-80 h-40 flex-1 bg-primary rounded-2xl text-white p-5 justify-center items-center">
                <h1>Pendentes</h1>
                <div class="flex justify-between">
                    <h1 class="text-[75px]">{{scheduledServices.length}}</h1>
                    <img src="icons/white-alert-icon.svg" alt="" />
                </div>
            </div>
            <div
                class="w-80 lg:w-60 xl:w-80 h-40 flex-1 bg-primary rounded-2xl text-white p-5 justify-center items-center">
                <h1>Em andamento</h1>
                <div class="flex justify-between">
                    <h1 class="text-[75px]">{{activeServices.length}}</h1>
                    <img src="icons/white-clock-icon.svg" alt="" />
                </div>
            </div>
            <div
                class="w-80 lg:w-60 xl:w-80 h-40 flex-1 bg-primary rounded-2xl text-white p-5 justify-center items-center">
                <h1>Concluídos</h1>
                <div class="flex justify-between">
                    <h1 class="text-[75px]">{{completedServices.length}}</h1>
                    <img src="icons/white-success-icon.svg" alt="" />
                </div>
            </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 mt-4 lg:mt-15 gap-4 [&_img]:h-15 [&_img]:w-15">
            <div
                class="w-80 lg:w-60 xl:w-80 h-40 flex-1 bg-primary rounded-2xl text-white p-5 justify-center items-center">
                <h1>Ganhos do mês</h1>
                <div class="flex justify-between">
                    <h1 class="text-[40px]">R$ 0,00</h1>
                    <img src="icons/white-alert-icon.svg" alt="" />
                </div>
            </div>
            <div
                class="w-80 lg:w-60 xl:w-80 h-40 flex-1 bg-primary rounded-2xl text-white p-5 justify-center items-center">
                <h1>Avaliações médias</h1>
                <div class="flex justify-between">
                    <h1 class="text-[75px]">5</h1>
                </div>
            </div>
        </div>
    </section>
    <section class="pt-10 w-full flex flex-col items-center mb-10">
        <h1 class="text-[24px] text-center mb-10 font-bold">Gerenciar atendimentos</h1>
        <div
            class=" bg-gray-300 rounded-2xl text-[12px]  lg:text-[14px] md  lg:w-1/3 h-11 font-bold flex justify-between items-center gap-1 lg:gap-2 ">
            <a (click)="setActiveTab('available')"
                [class]="'cursor-pointer flex items-center justify-center rounded-2xl m-0.5 w-1/5  h-10 px-4 ' + (activeTab === 'available' ? 'bg-white' : 'hover:bg-gray-200')">Solicitações</a>
            <a (click)="setActiveTab('active')"
                [class]="'cursor-pointer flex items-center justify-center rounded-2xl m-0.5 w-1/5   h-10 px-4 ' + (activeTab === 'active' ? 'bg-white' : 'hover:bg-gray-200')">Ativos</a>
            <a (click)="setActiveTab('scheduled')"
                [class]="'cursor-pointer flex items-center justify-center rounded-2xl m-0.5 w-1/5   h-10 px-4 ' + (activeTab === 'scheduled' ? 'bg-white' : 'hover:bg-gray-200')">Agendados</a>
            <a (click)="setActiveTab('all')"
                [class]="'cursor-pointer flex items-center justify-center rounded-2xl m-0.5 w-1/5  h-10 px-4 ' + (activeTab === 'all' ? 'bg-white' : 'hover:bg-gray-200')">Todos</a>
        </div>
    </section>
    <div class="mt-6 w-full px-4 lg:px-10">
        <div class="scroll-container overflow-x-auto">
            <div class="flex gap-6 pb-4">
                @if(activeTab === 'available') {
                @for(service of availableServices; track service.id) {
                <div
                    class="scroll-item bg-primary text-white rounded-lg p-4 shadow shrink-0 w-75 h-75 flex flex-col items-center gap-2">
                    @if(service.cliente) {
                    <img class="rounded-[100%] h-11 w-11" src="icons/user-circle-white-icon.svg" alt="Userphoto" />
                    <h1 class="text-[24px] text-center font-bold">{{service.cliente.nome}}</h1>
                    }@else {
                    <img class="rounded-[100%] h-11 w-11" src="icons/white-alert-icon.svg" alt="Pendente">
                    <h1 class="text-[24px] text-center font-bold">Pendente</h1>

                    }
                    <div class="flex w-full items-center justify-between">
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <img class="w-6" src="icons/white-calendary-icon.svg" alt="">
                            <p>{{serviceDate}}</p>
                        </div>
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <img class="w-6" src="icons/white-clock-icon.svg" alt="">
                            <p>{{serviceTime}}</p>
                        </div>
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <p>R$</p>
                            <h1 class="text-[14px] text-center">{{service.precoPropostoPorCliente | number:'1.2-2'}}
                            </h1>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <img src="icons/white-localization-icon.svg" alt="">
                        <p> {{ service.cliente?.rua }}, {{ service.cliente?.cidade }} - {{ service.cliente?.numero }}</p>
                    </div>
                    <div>
                        <app-button-green (click)="acceptService(service.id)"
                            text="Aceitar Solicitação"></app-button-green>
                    </div>
                </div>
                }
                }

                @if(activeTab === 'active') {
                @for(service of activeServices; track service.id) {
                <div
                    class="scroll-item bg-primary text-white rounded-lg p-4 shadow shrink-0 w-75 h-75 flex flex-col items-center gap-2">
                    @if(service.cliente) {
                    <img class="rounded-[100%] h-11 w-11" src="icons/user-circle-white-icon.svg" alt="Userphoto" />
                    <h1 class="text-[24px] text-center font-bold">{{service.cliente.nome}}</h1>
                    }@else {
                    <img class="rounded-[100%] h-11 w-11" src="icons/white-alert-icon.svg" alt="Pendente">
                    <h1 class="text-[24px] text-center font-bold">Pendente</h1>
                    }
                    <div class="flex w-full items-center justify-between">
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <img class="w-6" src="icons/white-calendary-icon.svg" alt="">
                            <p>{{serviceDate}}</p>
                        </div>
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <img class="w-6" src="icons/white-clock-icon.svg" alt="">
                            <p>{{serviceTime}}</p>
                        </div>
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <p>R$</p>
                            <h1 class="text-[14px] text-center">{{service.precoPropostoPorCliente | number:'1.2-2'}}
                            </h1>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <img src="icons/white-localization-icon.svg" alt="">
                        <p> {{ service.cliente?.rua }}, {{ service.cliente?.cidade }} - {{ service.cliente?.numero }}</p>
                    </div>
                </div>
                }
                }

                @if(activeTab === 'scheduled') {
                @for(service of scheduledServices; track service.id) {
                <div
                    class="scroll-item bg-primary text-white rounded-lg p-4 shadow shrink-0 w-75 h-75 flex flex-col items-center gap-2">
                    @if(service.cliente) {
                    <img class="rounded-[100%] h-11 w-11" src="icons/user-circle-white-icon.svg" alt="Userphoto" />
                    <h1 class="text-[24px] text-center font-bold">{{service.cliente.nome}}</h1>
                    }@else {
                    <img class="rounded-[100%] h-11 w-11" src="icons/white-alert-icon.svg" alt="Pendente">
                    <h1 class="text-[24px] text-center font-bold">Pendente</h1>
                    }
                    <div class="flex w-full items-center justify-between">
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <img class="w-6" src="icons/white-calendary-icon.svg" alt="">
                            <p>{{serviceDate}}</p>
                        </div>
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <img class="w-6" src="icons/white-clock-icon.svg" alt="">
                            <p>{{serviceTime}}</p>
                        </div>
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <p>R$</p>
                            <h1 class="text-[14px] text-center">{{service.precoPropostoPorCliente | number:'1.2-2'}}
                            </h1>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <img src="icons/white-localization-icon.svg" alt="">
                        <p> {{ service.cliente?.rua }}, {{ service.cliente?.cidade }} - {{ service.cliente?.numero }}</p>
                    </div>
                </div>
                }
                }

                @if(activeTab === 'all') {
                @for(service of allServices; track service.id) {
                <div
                    class="scroll-item bg-primary text-white rounded-lg p-4 shadow shrink-0 w-75 h-75 flex flex-col items-center gap-2">
                    @if(service.cliente) {
                    <img class="rounded-[100%] h-11 w-11" src="icons/user-circle-white-icon.svg" alt="Userphoto" />
                    <h1 class="text-[24px] text-center font-bold">{{service.cliente.nome}}</h1>
                    }@else {
                    <img class="rounded-[100%] h-11 w-11" src="icons/white-alert-icon.svg" alt="Pendente">
                    <h1 class="text-[24px] text-center font-bold">Pendente</h1>
                    }
                    <div class="flex w-full items-center justify-between">
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <img class="w-6" src="icons/white-calendary-icon.svg" alt="">
                            <p>{{serviceDate}}</p>
                        </div>
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <img class="w-6" src="icons/white-clock-icon.svg" alt="">
                            <p>{{serviceTime}}</p>
                        </div>
                        <div class="flex flex-col items-center gap-4 w-1/3">
                            <p>R$</p>
                            <h1 class="text-[14px] text-center">{{service.precoPropostoPorCliente | number:'1.2-2'}}
                            </h1>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <img src="icons/white-localization-icon.svg" alt="">
                        <p> {{ service.cliente?.rua }}, {{ service.cliente?.cidade }} - {{ service.cliente?.numero }}</p>
                    </div>
                </div>
                }
                }
            </div>
        </div>
    </div>
</main>
}